#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "🔍 Running pre-commit coverage check..."

if command -v pwsh >/dev/null 2>&1; then
    pwsh -ExecutionPolicy Bypass -File "./coverage-check.ps1"
elif command -v powershell >/dev/null 2>&1; then
    powershell -ExecutionPolicy Bypass -File "./coverage-check.ps1"
else
    echo "❌ PowerShell not found!"
    exit 1
fi

if [ $? -ne 0 ]; then
    echo "❌ Pre-commit hook failed!"
    exit 1
fi

echo "✅ All pre-commit checks passed!"
